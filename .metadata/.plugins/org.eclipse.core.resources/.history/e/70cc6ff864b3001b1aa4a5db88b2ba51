package com.servebeer.quake;

import java.io.File;

import org.bukkit.configuration.file.FileConfiguration;

import org.bukkit.plugin.java.JavaPlugin;

import com.servebeer.quake.events.OnDeath;
import com.servebeer.quake.events.OnPlayerJoin;
import com.servebeer.quake.events.OnPlayerRespawn;

public class Main extends JavaPlugin {
	
	FileConfiguration config = this.getConfig();
	
	public void onEnable()
	{
		this.saveDefaultConfig();
		try
		{
			if (config.getString("plugin-version") != "0.1")
			{
				System.out.println("Config file outdated. Generating new config.yml.");
				File config = new File(this.getDataFolder().getPath()+"config.yml");
				config.delete();
				this.saveDefaultConfig();
			}
		}
		catch (Exception e)
		{
			System.out.println("Config file outdated. Generating new config.yml.");
			File config = new File(this.getDataFolder().getPath()+"\\config.yml");
			config.delete();
			this.saveDefaultConfig();
		}
		
		getServer().getPluginManager().registerEvents(new OnPlayerJoin(), this);
		getServer().getPluginManager().registerEvents(new OnPlayerRespawn(), this);
		getServer().getPluginManager().registerEvents(new OnDeath(), this);
	}
	
	public void onDisable()
	{
		
	}
}